---
title: 服务器之间免密配置
date: 2017-12-02 16:48:12
tags: Ubuntu
---

# 服务器之间免密配置

主要用于服务器之间的通信。

<!--more-->
当服务器没有禁用密码登陆的时候，我们服务器之间通信可以通过密码登陆，比如ssh和scp指令的操作可以使用密码来操作。但是如果其中一台服务器设置了禁止密码登陆的话，连接该机子将会受阻；同理两台机子如果都禁用了密码登陆的话，两台机子之间的互相连接都会受阻。因此我们要设置两台机子之间的免密登陆。

## 方法一

在之前的博客“hadoop集群安装”中，其中就有一个ssh无密码登陆节点的配置的过程。

不过如果有一台机子已经设置过禁止密码登陆了，这种方法中使用scp传输id_rsa.pub文件将会受阻。此时可以使用方法二。
。
## 方法二

该方法比较简单粗暴，就跟之前博客“Ubuntu 系统设置密钥登陆”一样，给两台电脑互换公钥即可。

具体操作为：

在两台机子上执行

    ssh-keygen
    
用于生成机子的公钥，如果有的话可以直接用，或者删了重新生成都可。

接着复制服务器1中 ~/.ssh/id_rsa.pub中的公匙到服务器2中的~/.ssh/authorized_keys
同理将服务器2中的也复制到服务器1中对应的位置即可。

注：

可以直接使用cat指令进行查看id_rsa.pub中的公匙。

更改authorized_keys的文件模式

    chmod 600 authorized_keys